{{ 'our-clients-section.css' | asset_url | stylesheet_tag }}
<script src="{{ 'our-clients-section.js' | asset_url }}" defer></script>

{% assign slides_count = section.settings.number_of_slides | abs %}
{% assign slides_count_tablet = section.settings.number_of_slides_tablet | abs %}
{% assign slides_count_mobile = section.settings.number_of_slides_mobile | abs %}

<style>
  #shopify-section-{{ section.id }} .s-our-clients__header{
    color: {{ section.settings.content_color }};
  }
  #shopify-section-{{ section.id }} .s-our-clients__slider{
    max-width: {{section.settings.content_width}}px;
   {% if section.settings.slider_apply == false %}
     display: flex;
     flex-wrap: wrap;
     justify-content: space-between;
   {% endif %}
  }
  #shopify-section-{{ section.id }} .s-our-clients__bg{
  filter: brightness({% if section.settings.bg_brightness  == 0 %}1{% else %} 0.{{section.settings.bg_brightness | minus: 9 | abs}} {% endif %});
  }
  #shopify-section-{{ section.id }} .s-our-clients__review{
    background-color: {{ section.settings.review_bg_color }};
    color:{{ section.settings.review_text_color }};
    width: calc(100% / {{ section.settings.number_of_slides }} - {{ section.settings.spacing }}px);
    margin:{{ section.settings.spacing | divided_by: 2 }}px;
  }
  #shopify-section-{{ section.id }} .s-our-clients__review__foto{
    height: {{ section.settings.foto_size }}px;
    width: {{ section.settings.foto_size }}px;
    margin-top: -{{ section.settings.foto_size | divided_by:2 | plus: 20 }}px;   
  }
  #shopify-section-{{ section.id }} .s-our-clients__review h5{
    color: {{ section.settings.client_name_color }};
  }
 #shopify-section-{{ section.id }} .flickity-button{
   {% if section.blocks.size <= slides_count  %}
     display: none;
   {% endif  %}
  }
  @media screen and (max-width: 990px) {
   #shopify-section-{{ section.id }} .s-our-clients__review{
    width: calc(100% /{{ section.settings.number_of_slides_tablet }});
  }
  #shopify-section-{{ section.id }} .flickity-button{
    {% if section.blocks.size <= slides_count_tablet  %}
      display: none;
      {% else %}
      display:block;
    {% endif  %}
   }
  }

  @media screen and (max-width: 600px) {
    #shopify-section-{{ section.id }} .s-our-clients__review{
      width:calc(100% / {{ section.settings.number_of_slides_mobile }});
    }
    #shopify-section-{{ section.id }} .flickity-button{
      {% if section.blocks.size <= slides_count_mobile  %}
        display: none;
        {% else %}
        display:block;
      {% endif  %}
     }
  }
  
</style>

{%  if section.settings.autoplay %} 
 {%  assign speedSlider = section.settings.speed %}
 {% else %}
 {%  assign speedSlider = false %}
{% endif %}

<s-our-clients data-speed={{ speedSlider }} data-slider_apply={{ section.settings.slider_apply }}>
  <section class="s-our-clients">
    <img
      src="{{ section.settings.bg_image | img_url: 'master' }}"
      alt="{{ section.settings.bg_image.alt }}"
      class="s-our-clients__bg">
    <div class="s-our-clients__header">
      <span class="s-our-clients__header__subtitle">
        {{ section.settings.subtitle }}
      </span>
      {{ section.settings.title }}
    </div>
    <div class="s-our-clients__slider">
      {% for block in section.blocks %}
        {% assign client = block.settings %}
        <div class="s-our-clients__review">
          {% if client.client_foto %}
          <div class="s-our-clients__review__foto">
            <img src="{{ client.client_foto | img_url: 'master' }}" alt="{{ client.client_name }}">
          </div>
          {% endif %}
          <h5>{{ client.client_name }}</h5>
          <p>{{ client.review }}</p>
        </div>
      {% endfor %}
    </div>
  </section>
</s-our-clients>

{% schema %}
  {
    "name": "Our clients",
    "settings": [
      {
        "type": "range",
        "id": "content_width",
        "min": 600,
        "max": 1600,
        "step": 10,
        "unit": "px",
        "label": "Content width",
        "default": 1200
      },
      {
        "type": "range",
        "id": "spacing",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "spacing between columns",
        "default": 16
      },
      {
        "type": "checkbox",
        "id": "slider_apply",
        "label": "Slider apply",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "autoplay",
        "label": "Slider autoplay",
        "default": true
      },
      {
        "type": "range",
        "id": "speed",
        "min": 1000,
        "max": 9000,
        "step": 100,
        "unit": "ms",
        "label": "Autoplay speed",
        "default": 3000
      },
      {
        "type": "select",
        "id": "number_of_slides",
        "label": "Number of slides desctop",
        "options": [
          {
            "value": "1",
            "label": "One"
          }, {
            "value": "2",
            "label": "Two"
          }, {
            "value": "3",
            "label": "Three"
          }, {
            "value": "4",
            "label": "Four"
          }
        ],
        "default": "4"
      },
      {
        "type": "select",
        "id": "number_of_slides_tablet",
        "label": "Number of slides tablet",
        "options": [
          {
            "value": "1",
            "label": "One"
          }, {
            "value": "2",
            "label": "Two"
          }, {
            "value": "3",
            "label": "Three"
          }, {
            "value": "4",
            "label": "Four"
          }
        ],
        "default": "2"
      },
      {
        "type": "select",
        "id": "number_of_slides_mobile",
        "label": "Number of slides mobile",
        "options": [
          {
            "value": "1",
            "label": "One"
          }, {
            "value": "2",
            "label": "Two"
          }
        ],
        "default": "1"
      },
      {
        "type": "image_picker",
        "id": "bg_image",
        "label": "Background image",
        "info": "Size Recommended 1920x850"
      }, {
        "type": "range",
        "id": "bg_brightness",
        "min": 0,
        "max": 9,
        "step": 1,
        "label": "Background fogging",
        "default": 0
      }, {
        "type": "color",
        "id": "content_color",
        "label": "Content color",
        "default": "#FFFFFF"
      }, {
        "type": "text",
        "id": "subtitle",
        "label": "Subtitle",
        "default": "What people say"
      }, {
        "type": "richtext",
        "id": "title",
        "label": "Title",
        "default": "<h2>Words Of Our Clients</h2>"
      }, {
        "type": "range",
        "id": "foto_size",
        "min": 60,
        "max": 300,
        "step": 5,
        "unit": "px",
        "label": "Foto size",
        "default": 120
      }, {
        "type": "color",
        "id": "review_bg_color",
        "label": "Review background color",
        "default": "#FFFFFF"
      }, {
        "type": "color",
        "id": "client_name_color",
        "label": "Client name color",
        "default": "#000000"
      }, {
        "type": "color",
        "id": "review_text_color",
        "label": "Review text color",
        "default": "#9e9e9e"
      }
    ],
    "blocks": [
      {
        "type": "client",
        "name": "Client",
        "settings": [
          {
            "type": "image_picker",
            "id": "client_foto",
            "label": "Client foto",
            "info": "Size Recommended 300x300"
          }, {
            "type": "text",
            "id": "client_name",
            "label": "Client name",
            "default": "John Doe"
          }, {
            "type": "textarea",
            "id": "review",
            "label": "Review",
            "default": "I recently tried handmade soap, and it was a delightful experience. The soap's natural fragrance and gentle, chemical-free formula left my skin feeling refreshed and pampered."
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Our clients"
      }
    ]
  }
{% endschema %}